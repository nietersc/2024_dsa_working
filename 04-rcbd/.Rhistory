trt_num = row_number(),
trt_name = paste0(nrate_kgha, "+", krate_kgha)
)
trts
# Setting seed to get same randomization result every time
set.seed(930)
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)
View(crd_rand)
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(plot = row_number())
View(crd_rand)
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(plot = row_number(),
plot = sample(plot)) # Randomizing trtname to plots, without restrictions
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(plot = row_number(),
plot = sample(plot)) # Randomizing trtname to plots, without restrictions
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(plot = row_number(),
plot1 = sample(plot)) # Randomizing trtname to plots, without restrictions
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = sample(row_num)) # Randomizing trtname to plots, without restrictions
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = sample(row_num)) |>
arrange(plot)# Randomizing trt_name to plots, without restrictions
# Setting seed to get same randomization result every time
set.seed(930)
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = sample(row_num)) |>
arrange(plot)# Randomizing trt_name to plots, without restrictions
# Setting seed to get same randomization result every time
set.seed(930)
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = sample(row_num)) |>
arrange(plot)# Randomizing trt_name to plots, without restrictions
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = as.numeric(sample(row_num))) |>
arrange(plot)# Randomizing trt_name to plots, without restrictions
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = as.numeric(sample(row_num))) |>
dplyr::arrange(plot)# Randomizing trt_name to plots, without restrictions
# Setting seed to get same randomization result every time
set.seed(930)
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = as.numeric(sample(row_num))) |>
dplyr::arrange(plot)# Randomizing trt_name to plots, without restrictions
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = as.numeric(sample(row_num))) |>
dplyr::select(-row_num)|>
dplyr::arrange(plot)# Randomizing trt_name to plots, without restrictions
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9)
)
View(crd_layout)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = seq(from = 1, to = 9, by = 1)
)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1,),4)
)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4)
)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4),
lab = paste0(plot,"\n","trt_name")
)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4),
label = paste0(plot,"\n","trt_name")
)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4),
label = paste0(plot,"\n",trt_name)
)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4),
label = paste0(plot,"\n",.data$trt_name)
)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4),
label = paste0(plot,"\n",trt_name)
)
crd_layout |>
ggplot(aes())+
geom_tile(aes(fill = trt_name),
color = "black")
crd_layout |>
ggplot()+
geom_tile(aes(fill = trt_name),
color = "black")
crd_layout |>
ggplot()+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4),
label = paste0(plot,"\n",trt_name)
)
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)
View(crd_rand)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4)),
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4))
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4))|>
mutate(
label = paste0(plot,"\n",trt_name)
)
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = label),
color = "black",
show.legend = F)
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)+
geom_text(label = label)
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4))|>
mutate(
label = paste0(plot,"\n",trt_name)
)
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)+
geom_text(label = label)
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)+
geom_text(aes(label = label))
# Setting seed to get same randomization result every time
set.seed(930)
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = as.numeric(sample(row_num))) |>
dplyr::select(-row_num)|>
dplyr::arrange(plot)# Randomizing trt_name to plots, without restrictions
crd_rand
## Plot layout
Let's create a structure for plot layout in different rows and columns.
The number of rows and columns could be decided based on the actual field layout. For ex., do you have enough space for 9 columns and 4 rows, or 9 rows and 4 columns?
Let's assume we have space for 9 rows and 4 columns.
```{r crd_layout}
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4))|>
mutate(
label = paste0(plot,"\n",trt_name)
)
# Setting seed to get same randomization result every time
set.seed(930)
crd_rand <- crossing(trt_name = c(trts$trt_name),
rep = 1:4)|> # Since plots are organized without a structure, let's number them 1 through 36
mutate(row_num = row_number(),
plot = as.numeric(sample(row_num))) |>
dplyr::select(-row_num)|>
dplyr::arrange(plot)# Randomizing trt_name to plots, without restrictions
crd_layout <- crd_rand |>
mutate(
row = rep(1:4, each = 9),
col = rep(seq(from = 1, to = 9, by = 1), times = 4))|>
mutate(
label = paste0(plot,"\n",trt_name)
)
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)+
geom_text(aes(label = label))
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)+
geom_text(aes(label = label))+
labs(title = "CRD Randomization of a 3 x 3 Factorial (9 Treatments)")
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)+
geom_text(aes(label = label))+
labs(title = "CRD Randomization of a 3 x 3 Factorial (9 Treatments)")+
theme_void()
rcbd_rand <- crossing(trt_name = trts$trt_name,
rep = 1:4)
rcbd_rand <- crossing(trt_name = trts$trt_name,
rep = 1:4) |>
arramge(rep)
rcbd_rand <- crossing(trt_name = trts$trt_name,
rep = 1:4) |>
arrange(rep)
View(rcbd_rand)
rcbd_rand <- crossing(trt_name = trts$trt_name,
rep = 1:4) |>
arrange(rep) |>
group_by(rep) |>
mutate(
trt_name = sample(trt_name)
)
View(rcbd_rand)
rcbd_rand <- crossing(trt_name = trts$trt_name,
rep = 1:4) |>
arrange(rep) |>
group_by(rep) |>
mutate(
trt_name = sample(trt_name),
plot = (rep*100) + 1:9
)
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)+
geom_text(aes(label = label))+
labs(title = "CRD Randomization of a 3 x 3 Factorial (9 Treatments)")+
theme_void()+
scale_fill_npg()
library(ggsci)
crd_layout |>
ggplot(aes(x = row, y = col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F)+
geom_text(aes(label = label))+
labs(title = "CRD Randomization of a 3 x 3 Factorial (9 Treatments)")+
theme_void()+
scale_fill_npg()
rcbd_rand <- crossing(trt_name = trts$trt_name,
rep = 1:4) |>
arrange(rep) |>
group_by(rep) |>
mutate(
trt_name = sample(trt_name),
plot = (rep*100) + 1:9
) |>
ungroup()
# Setting seed to get same randomization result every time
set.seed(930)
rcbd_rand <- crossing(trt_name = trts$trt_name,
rep = 1:4) |>
arrange(rep) |>
group_by(rep) |>
mutate(
trt_name = sample(trt_name),
plot = (rep*100) + 1:9
) |>
ungroup()
rcbd_rand
rcbd_rand |>
group_by(rep, trt_name) |>
tally()
tally <- rcbd_rand |>
group_by(rep, trt_name) |>
tally()
View(tally)
tally <- rcbd_rand |>
group_by(rep, trt_name) |>
tally() |>
filter(n > 1)
View(trts)
tally <- rcbd_rand |>
group_by(rep) |>
tally() |>
filter(n > 1)
rcbd_layout <- rcbd_rand %>%
# Defining number of rows and columns in the field for plotting purposes
mutate(row = rep(1:4, each = 9)) %>%
mutate(col = rep(seq(from = 1,
to = 9, #total number of treatments,
by = 1),
times = 4 #total number of blocks
)) %>%
# Creating plot and trtname labels for plotting
mutate(lab = paste0(plot, "\n", trtname))
rcbd_layout <- rcbd_rand %>%
# Defining number of rows and columns in the field for plotting purposes
mutate(row = rep(1:4, each = 9)) %>%
mutate(col = rep(seq(from = 1,
to = 9, #total number of treatments,
by = 1),
times = 4 #total number of blocks
)) %>%
# Creating plot and trtname labels for plotting
mutate(lab = paste0(plot, "\n", trt_name))
View(rcbd_layout)
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold", vjust = -.8)+
geom_text(aes(label = trtname), vjust = 1)+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold", vjust = -.8)+
geom_text(aes(label = trt_name), vjust = 1)+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold",
vjust = -.8, color = "white")+
geom_text(aes(label = trt_name), vjust = 1)+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "black",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold",
vjust = -.8, color = "white")+
geom_text(aes(label = trt_name), vjust = 1,
color = "white")+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "white",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold",
vjust = -.8, color = "white")+
geom_text(aes(label = trt_name), vjust = 1,
color = "white")+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "white",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold",
vjust = -.8, color = "white")+
geom_text(aes(label = trt_name), vjust = 1,
color = "gray50")+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "white",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold",
vjust = -.8, color = "white")+
geom_text(aes(label = trt_name), vjust = 1,
color = "gray20")+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "white",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold",
vjust = -.8, color = "grey20")+
geom_text(aes(label = trt_name), vjust = 1,
color = "gray20")+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "white",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold",
vjust = -.8, color = "grey50")+
geom_text(aes(label = trt_name), vjust = 1,
color = "gray50")+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
2
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "white",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold",
vjust = -.8, color = "grey20")+
geom_text(aes(label = trt_name), vjust = 1,
color = "gray20")+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
rcbd_rand |>
left_join(trts)
ggplot(data = rcbd_layout, aes(x = row,
y = -col))+
geom_tile(aes(fill = trt_name),
color = "white",
show.legend = F
)+
geom_text(aes(label = plot), fontface = "bold",
vjust = -.8, color = "grey10")+
geom_text(aes(label = trt_name), vjust = 1,
color = "gray10")+
labs(title = "RCBD randomization of a 3 x 3 factorial (9 treatments)") +
theme_void()+
scale_fill_npg()
rcbd_rand |>
left_join(trts) |>
# Retrieving other information contained in trts
dplyr::select(plot,rep,trt_name,trt_num,
nrate_kgha, krate_kgha)
rcbd_rand |>
left_join(trts) |>
# Retrieving other information contained in trts
dplyr::select(plot,rep,trt_name,trt_num,
nrate_kgha, krate_kgha) |>
# Rearranging columns
write.csv('output/rcbd_randomization_table.csv')
ggsave("output/rcbd_layoutmap.png",
width = 6,
height = 4,
bg = "white")
